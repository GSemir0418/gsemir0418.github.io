<!DOCTYPE html>
<html><head>
<title>可视化大屏技术</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="可视化大屏技术" />
<meta property="og:description" content="1 背景和意义 数据可视化即把相对复杂、抽象的数据通过可视化的方式以人们更易理解的形式展示出来的一系列手段，旨在更形象地表达数据内在的信息和规律，促进数据信息的传播和应用。在当前Web前端可视化技术的支持下，数据可视化除了“可视”，还有可交流、可互动的特点。数据可视化的本质是数据空间到图形空间的映射。是抽象数据的具象表达。
大屏数据可视化是以大屏为主要展示载体的数据可视化设计。基于大屏展示“大面积、炫酷动效、丰富色彩”等主要特征，通过关键信息大屏共享的方式可方便企业团队讨论与决策，因此大屏也常应用与数据分析监测领域。目前大屏数据可视化主要分为信息展示、数据分析及监控预警三大类。
随着大数据的发展，可视化大屏在各个行业的应用越来越广泛，尤其是在政府、商业、金融、制造等行业的业务场景中。例如，可视化大屏作为传递信息的有效手段，在城市智能运营中心、应急指挥中心、公安监控中心、电力调度中心、金融交易大厅等部门和机构中发挥着重要作用；同时它具有日常监测、分析判断、应急指挥、展示汇报等多种功能，在提高科学管理方面也发挥着重要作用。
2 技术原理 数据可视化展示大屏主要基于React框架、ECharts可视化图表库、CSS布局与适配以及特效制作等Web前端可视化开发技术。
2.1 React框架 React是一个声明式，高效且灵活的用于构建用户界面的JavaScript库。使用React可以将一些简短、独立的代码片段组合成复杂的UI界面，这些代码片段被称作“组件”。数据可视化展示大屏中的每个展示模块均可封装为独立的组件，方便复用与后期维护。
2.2 大屏适配公式 可视化大屏设计稿的比例通常为16:9，为了保证其在不同分辨率及屏幕比例上的展示效果，在开发时需运用大屏适配算法对大屏尺寸信息进行换算。
公式1.1为大屏尺寸适配公式，其中Wp为页面有效宽度，Hp为页面有效高度。
2.3 元素适配公式 锁定好大屏尺寸后，需要利用到CSS3中新增的rem单位结合适配公式，对大屏内部各元素的尺寸针对不同比例的屏幕进行适配。
Rem（Root em）是CSS3新增的一个相对单位，使用rem为元素设定相对尺寸时，相对的只是HTML根元素。通过它既可以做到只修改根元素就成比例地调整所有字体大小，又可以避免字体大小逐层复合的连锁反应。公式1.2为内部元素尺寸适配公式。
2.4 ECharts可视化图表库 ECharts是一个使用JavaScript实现的开源可视化库，涵盖各行业图表，满足各种需求。其主要特点如下：
 丰富的可视化类型：提供了常规的折线图、柱状图、散点图、饼图、K线图，用于统计的盒形图，用于地理数据可视化的地图、热力图、线图，用于关系数据可视化的关系图、treemap、旭日图，多维数据可视化的平行坐标，还有用于BI的漏斗图，仪表盘，并且支持图与图之间的混搭。 多种数据格式无需转换直接使用：内置的dataset属性（4.0&#43;）支持直接传入包括二维表，key-value等多种格式的数据源，此外还支持输入TypedArray格式的数据。 千万数据的前端展现：通过增量渲染技术（4.0&#43;），配合各种细致的优化，ECharts能够展现千万级的数据量。 移动端优化：针对移动端交互做了细致的优化，例如移动端小屏上适于用手指在坐标系中进行缩放、平移。PC端也可以用鼠标在图中进行缩放（用鼠标滚轮）、平移等。 多渲染方案，跨平台使用：支持以Canvas、SVG（4.0&#43;）、VML的形式渲染图表。 深度的交互式数据探索：提供了图例、视觉映射、数据区域缩放、tooltip、数据刷选等开箱即用的交互组件，可以对数据进行多维度数据筛取、视图缩放、展示细节等交互操作。 多维数据的支持以及丰富的视觉编码手段：对于传统的散点图等，传入的数据也可以是多个维度的。 动态数据：数据的改变驱动图表展现的改变。 绚丽的特效：针对线数据，点数据等地理数据的可视化提供了吸引眼球的特效。 通过GL实现更多更强大绚丽的三维可视化：在VR，大屏场景里实现三维的可视化效果。  3 技术实现方案 3.1 大屏设计流程   根据业务场景抽取关键指标
关键指标是一些概括性词语，是对一组或者一系列数据的统称。一般情况下，一个指标在大屏上独占一块区域。以supAPS为例，这里的关键指标有：原料库存、计划实际对比、产品库存与库存成本等。确定关键指标后，根据业务需求拟定各个指标展示的优先级（主、次、辅）。
  选定可视化图表类型
同一个指标的数据，从不同维度分析就有不同结果。当确定好各项指标的分析维度后，事实上图表类型也就基本确定了。如库存成本选用柱状图的形式，装置加工选用表格的形式，计划实际对比选择折线图的形式等。
  页面布局
图表类型和屏幕尺寸确立后，接下来要对设计稿进行页面布局的划分。核心业务指标安排在中间位置、占较大面积；其余的指标按优先级依次在核心指标周围展开。一般把有关联的指标让其相邻或靠近，把图表类型相近的指标放一起，这样能减少观者认知上的负担并提高信息传递的效率。
  页面开发
在定义好分析指标、确定页面布局后，进行前端样式的开发工作，将数据接入到前端并呈现出来。
  整体细节调优与测试
  页面开发完成后，将真实页面投放到大屏进行的测试与优化。主要分为两部分：
1）视觉方面的测试：关键视觉元素、字体字号、页面动效、图形图表等是否按预期显示、有无变形、错位等情况。
2）性能与数据方面的测试：图形图表动画是否流畅、数据加载、刷新有无异常；页面长时间展示是否存在奔溃、卡死等情况；后台控制系统能否正常切换前端页面显示。
  3.2 大屏适配 基于大屏适配公式，计算页面尺寸。
const clientWidth = document." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gsemir0418.github.io/posts/%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E6%8A%80%E6%9C%AF/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-28T09:30:55&#43;08:00" />
<meta property="article:modified_time" content="2021-05-28T09:30:55&#43;08:00" /><meta property="og:site_name" content="My Blog" />






<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="可视化大屏技术"/>
<meta name="twitter:description" content="1 背景和意义 数据可视化即把相对复杂、抽象的数据通过可视化的方式以人们更易理解的形式展示出来的一系列手段，旨在更形象地表达数据内在的信息和规律，促进数据信息的传播和应用。在当前Web前端可视化技术的支持下，数据可视化除了“可视”，还有可交流、可互动的特点。数据可视化的本质是数据空间到图形空间的映射。是抽象数据的具象表达。
大屏数据可视化是以大屏为主要展示载体的数据可视化设计。基于大屏展示“大面积、炫酷动效、丰富色彩”等主要特征，通过关键信息大屏共享的方式可方便企业团队讨论与决策，因此大屏也常应用与数据分析监测领域。目前大屏数据可视化主要分为信息展示、数据分析及监控预警三大类。
随着大数据的发展，可视化大屏在各个行业的应用越来越广泛，尤其是在政府、商业、金融、制造等行业的业务场景中。例如，可视化大屏作为传递信息的有效手段，在城市智能运营中心、应急指挥中心、公安监控中心、电力调度中心、金融交易大厅等部门和机构中发挥着重要作用；同时它具有日常监测、分析判断、应急指挥、展示汇报等多种功能，在提高科学管理方面也发挥着重要作用。
2 技术原理 数据可视化展示大屏主要基于React框架、ECharts可视化图表库、CSS布局与适配以及特效制作等Web前端可视化开发技术。
2.1 React框架 React是一个声明式，高效且灵活的用于构建用户界面的JavaScript库。使用React可以将一些简短、独立的代码片段组合成复杂的UI界面，这些代码片段被称作“组件”。数据可视化展示大屏中的每个展示模块均可封装为独立的组件，方便复用与后期维护。
2.2 大屏适配公式 可视化大屏设计稿的比例通常为16:9，为了保证其在不同分辨率及屏幕比例上的展示效果，在开发时需运用大屏适配算法对大屏尺寸信息进行换算。
公式1.1为大屏尺寸适配公式，其中Wp为页面有效宽度，Hp为页面有效高度。
2.3 元素适配公式 锁定好大屏尺寸后，需要利用到CSS3中新增的rem单位结合适配公式，对大屏内部各元素的尺寸针对不同比例的屏幕进行适配。
Rem（Root em）是CSS3新增的一个相对单位，使用rem为元素设定相对尺寸时，相对的只是HTML根元素。通过它既可以做到只修改根元素就成比例地调整所有字体大小，又可以避免字体大小逐层复合的连锁反应。公式1.2为内部元素尺寸适配公式。
2.4 ECharts可视化图表库 ECharts是一个使用JavaScript实现的开源可视化库，涵盖各行业图表，满足各种需求。其主要特点如下：
 丰富的可视化类型：提供了常规的折线图、柱状图、散点图、饼图、K线图，用于统计的盒形图，用于地理数据可视化的地图、热力图、线图，用于关系数据可视化的关系图、treemap、旭日图，多维数据可视化的平行坐标，还有用于BI的漏斗图，仪表盘，并且支持图与图之间的混搭。 多种数据格式无需转换直接使用：内置的dataset属性（4.0&#43;）支持直接传入包括二维表，key-value等多种格式的数据源，此外还支持输入TypedArray格式的数据。 千万数据的前端展现：通过增量渲染技术（4.0&#43;），配合各种细致的优化，ECharts能够展现千万级的数据量。 移动端优化：针对移动端交互做了细致的优化，例如移动端小屏上适于用手指在坐标系中进行缩放、平移。PC端也可以用鼠标在图中进行缩放（用鼠标滚轮）、平移等。 多渲染方案，跨平台使用：支持以Canvas、SVG（4.0&#43;）、VML的形式渲染图表。 深度的交互式数据探索：提供了图例、视觉映射、数据区域缩放、tooltip、数据刷选等开箱即用的交互组件，可以对数据进行多维度数据筛取、视图缩放、展示细节等交互操作。 多维数据的支持以及丰富的视觉编码手段：对于传统的散点图等，传入的数据也可以是多个维度的。 动态数据：数据的改变驱动图表展现的改变。 绚丽的特效：针对线数据，点数据等地理数据的可视化提供了吸引眼球的特效。 通过GL实现更多更强大绚丽的三维可视化：在VR，大屏场景里实现三维的可视化效果。  3 技术实现方案 3.1 大屏设计流程   根据业务场景抽取关键指标
关键指标是一些概括性词语，是对一组或者一系列数据的统称。一般情况下，一个指标在大屏上独占一块区域。以supAPS为例，这里的关键指标有：原料库存、计划实际对比、产品库存与库存成本等。确定关键指标后，根据业务需求拟定各个指标展示的优先级（主、次、辅）。
  选定可视化图表类型
同一个指标的数据，从不同维度分析就有不同结果。当确定好各项指标的分析维度后，事实上图表类型也就基本确定了。如库存成本选用柱状图的形式，装置加工选用表格的形式，计划实际对比选择折线图的形式等。
  页面布局
图表类型和屏幕尺寸确立后，接下来要对设计稿进行页面布局的划分。核心业务指标安排在中间位置、占较大面积；其余的指标按优先级依次在核心指标周围展开。一般把有关联的指标让其相邻或靠近，把图表类型相近的指标放一起，这样能减少观者认知上的负担并提高信息传递的效率。
  页面开发
在定义好分析指标、确定页面布局后，进行前端样式的开发工作，将数据接入到前端并呈现出来。
  整体细节调优与测试
  页面开发完成后，将真实页面投放到大屏进行的测试与优化。主要分为两部分：
1）视觉方面的测试：关键视觉元素、字体字号、页面动效、图形图表等是否按预期显示、有无变形、错位等情况。
2）性能与数据方面的测试：图形图表动画是否流畅、数据加载、刷新有无异常；页面长时间展示是否存在奔溃、卡死等情况；后台控制系统能否正常切换前端页面显示。
  3.2 大屏适配 基于大屏适配公式，计算页面尺寸。
const clientWidth = document."/>







<script src="/vendor/js/jquery.min.js" ></script>
<script src="/vendor/js/popper.min.js" ></script>
<script src="/vendor/js/bootstrap.min.js" ></script>
<script src="/vendor/js/smooth-scroll.polyfills.min.js" ></script>
<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>






<link rel="stylesheet" href="https://gsemir0418.github.io/scss/journal.min.5e8f3f653e9f6ce67bf72ff8ee6fee69decf7b5639a3ae7f8344750ad4e065b1.css" integrity="sha256-Xo8/ZT6fbOZ79y/47m/uad7Pe1Y5o65/g0R1CtTgZbE=" media="screen">



<link rel="stylesheet" href="https://gsemir0418.github.io/scss/dark-mode.min.bdfa63b2e89903517dcbb1032b537d54cff3f425c19d008a78dfe49e6cd07ced.css" integrity="sha256-vfpjsuiZA1F9y7EDK1N9VM/z9CXBnQCKeN/knmzQfO0=" media="screen">


<script src="https://gsemir0418.github.io//js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");
</script>




  
    <script src="https://gsemir0418.github.io//js/toc-collapse.js"></script>
  



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="/vendor/js/md5.min.js"></script>
<script>
  var gitalk = new Gitalk({
  clientID: 'your client id',
  clientSecret: 'your client secret',
  repo: 'repo name',
  owner: 'user',
  admin: ['user'],
  id: md5(location.pathname),
  distractionFreeMode: 'false'
  });
  window.onload = function () {
        gitalk.render('gitalk-container')
  }
</script>








</head>
<body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://gsemir0418.github.io/">
    
        <div class="nav-title">
            GSemir Blog
        </div>
        
        <div class="nav-subtitle">
            个人技术博客
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	2021 GSemir Blog
	

    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#1-%e8%83%8c%e6%99%af%e5%92%8c%e6%84%8f%e4%b9%89" onclick="onNavClick(`#1-背景和意义-nav`)" id="1-背景和意义-nav">
									1 背景和意义
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2-%e6%8a%80%e6%9c%af%e5%8e%9f%e7%90%86" onclick="onNavClick(`#2-技术原理-nav`)" id="2-技术原理-nav">
									2 技术原理
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								<ul class="collapse" data-toggle="collapse">
							
						
						
							<li>
								<a href="#21-react%e6%a1%86%e6%9e%b6" onclick="onNavClick(`#21-react框架-nav`)" id="21-react框架-nav">
									2.1 React框架
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#22-%e5%a4%a7%e5%b1%8f%e9%80%82%e9%85%8d%e5%85%ac%e5%bc%8f" onclick="onNavClick(`#22-大屏适配公式-nav`)" id="22-大屏适配公式-nav">
									2.2 大屏适配公式
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#23-%e5%85%83%e7%b4%a0%e9%80%82%e9%85%8d%e5%85%ac%e5%bc%8f" onclick="onNavClick(`#23-元素适配公式-nav`)" id="23-元素适配公式-nav">
									2.3 元素适配公式
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#24-echarts%e5%8f%af%e8%a7%86%e5%8c%96%e5%9b%be%e8%a1%a8%e5%ba%93" onclick="onNavClick(`#24-echarts可视化图表库-nav`)" id="24-echarts可视化图表库-nav">
									2.4 ECharts可视化图表库
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#3-%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0%e6%96%b9%e6%a1%88" onclick="onNavClick(`#3-技术实现方案-nav`)" id="3-技术实现方案-nav">
									3 技术实现方案
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								<ul class="collapse" data-toggle="collapse">
							
						
						
							<li>
								<a href="#31-%e5%a4%a7%e5%b1%8f%e8%ae%be%e8%ae%a1%e6%b5%81%e7%a8%8b" onclick="onNavClick(`#31-大屏设计流程-nav`)" id="31-大屏设计流程-nav">
									3.1 大屏设计流程
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#32-%e5%a4%a7%e5%b1%8f%e9%80%82%e9%85%8d" onclick="onNavClick(`#32-大屏适配-nav`)" id="32-大屏适配-nav">
									3.2 大屏适配
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#33-css%e5%b8%83%e5%b1%80" onclick="onNavClick(`#33-css布局-nav`)" id="33-css布局-nav">
									3.3 CSS布局
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#34-%e7%89%b9%e6%95%88%e5%88%b6%e4%bd%9c" onclick="onNavClick(`#34-特效制作-nav`)" id="34-特效制作-nav">
									3.4 特效制作
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								<ul class="collapse" data-toggle="collapse">
							
						
						
							<li>
								<a href="#1-%e8%be%b9%e6%a1%86%e5%88%b6%e4%bd%9c" onclick="onNavClick(`#1-边框制作-nav`)" id="1-边框制作-nav">
									1 边框制作
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2-%e9%9c%93%e8%99%b9%e5%ad%97%e4%bd%93" onclick="onNavClick(`#2-霓虹字体-nav`)" id="2-霓虹字体-nav">
									2 霓虹字体
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#3-%e8%a1%a8%e6%a0%bc%e6%bb%9a%e5%8a%a8%e7%89%b9%e6%95%88" onclick="onNavClick(`#3-表格滚动特效-nav`)" id="3-表格滚动特效-nav">
									3 表格滚动特效
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#35-echarts%e5%9b%be%e8%a1%a8%e7%9a%84%e5%88%b6%e4%bd%9c" onclick="onNavClick(`#35-echarts图表的制作-nav`)" id="35-echarts图表的制作-nav">
									3.5 ECharts图表的制作
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#36-%e5%ae%9e%e6%97%b6%e6%9b%b4%e6%96%b0%e6%95%b0%e6%8d%ae" onclick="onNavClick(`#36-实时更新数据-nav`)" id="36-实时更新数据-nav">
									3.6 实时更新数据
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a class="pagination-action" v-on:click="toggleDarkMode">
            <i class="material-icons pagination-action-icon" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons pagination-action-icon" v-else="isDarkMode">
                brightness_7
            </i>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#1-%e8%83%8c%e6%99%af%e5%92%8c%e6%84%8f%e4%b9%89" onclick="onNavClick(`#1-背景和意义-nav`)" id="1-背景和意义-nav">
									1 背景和意义
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2-%e6%8a%80%e6%9c%af%e5%8e%9f%e7%90%86" onclick="onNavClick(`#2-技术原理-nav`)" id="2-技术原理-nav">
									2 技术原理
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								<ul class="collapse" data-toggle="collapse">
							
						
						
							<li>
								<a href="#21-react%e6%a1%86%e6%9e%b6" onclick="onNavClick(`#21-react框架-nav`)" id="21-react框架-nav">
									2.1 React框架
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#22-%e5%a4%a7%e5%b1%8f%e9%80%82%e9%85%8d%e5%85%ac%e5%bc%8f" onclick="onNavClick(`#22-大屏适配公式-nav`)" id="22-大屏适配公式-nav">
									2.2 大屏适配公式
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#23-%e5%85%83%e7%b4%a0%e9%80%82%e9%85%8d%e5%85%ac%e5%bc%8f" onclick="onNavClick(`#23-元素适配公式-nav`)" id="23-元素适配公式-nav">
									2.3 元素适配公式
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#24-echarts%e5%8f%af%e8%a7%86%e5%8c%96%e5%9b%be%e8%a1%a8%e5%ba%93" onclick="onNavClick(`#24-echarts可视化图表库-nav`)" id="24-echarts可视化图表库-nav">
									2.4 ECharts可视化图表库
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#3-%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0%e6%96%b9%e6%a1%88" onclick="onNavClick(`#3-技术实现方案-nav`)" id="3-技术实现方案-nav">
									3 技术实现方案
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								<ul class="collapse" data-toggle="collapse">
							
						
						
							<li>
								<a href="#31-%e5%a4%a7%e5%b1%8f%e8%ae%be%e8%ae%a1%e6%b5%81%e7%a8%8b" onclick="onNavClick(`#31-大屏设计流程-nav`)" id="31-大屏设计流程-nav">
									3.1 大屏设计流程
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#32-%e5%a4%a7%e5%b1%8f%e9%80%82%e9%85%8d" onclick="onNavClick(`#32-大屏适配-nav`)" id="32-大屏适配-nav">
									3.2 大屏适配
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#33-css%e5%b8%83%e5%b1%80" onclick="onNavClick(`#33-css布局-nav`)" id="33-css布局-nav">
									3.3 CSS布局
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#34-%e7%89%b9%e6%95%88%e5%88%b6%e4%bd%9c" onclick="onNavClick(`#34-特效制作-nav`)" id="34-特效制作-nav">
									3.4 特效制作
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								<ul class="collapse" data-toggle="collapse">
							
						
						
							<li>
								<a href="#1-%e8%be%b9%e6%a1%86%e5%88%b6%e4%bd%9c" onclick="onNavClick(`#1-边框制作-nav`)" id="1-边框制作-nav">
									1 边框制作
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2-%e9%9c%93%e8%99%b9%e5%ad%97%e4%bd%93" onclick="onNavClick(`#2-霓虹字体-nav`)" id="2-霓虹字体-nav">
									2 霓虹字体
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#3-%e8%a1%a8%e6%a0%bc%e6%bb%9a%e5%8a%a8%e7%89%b9%e6%95%88" onclick="onNavClick(`#3-表格滚动特效-nav`)" id="3-表格滚动特效-nav">
									3 表格滚动特效
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#35-echarts%e5%9b%be%e8%a1%a8%e7%9a%84%e5%88%b6%e4%bd%9c" onclick="onNavClick(`#35-echarts图表的制作-nav`)" id="35-echarts图表的制作-nav">
									3.5 ECharts图表的制作
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#36-%e5%ae%9e%e6%97%b6%e6%9b%b4%e6%96%b0%e6%95%b0%e6%8d%ae" onclick="onNavClick(`#36-实时更新数据-nav`)" id="36-实时更新数据-nav">
									3.6 实时更新数据
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://gsemir0418.github.io/">
            GSemir Blog
        </a>
        
        <button type="button" class="nav-darkmode-toggle" v-on:click="toggleDarkMode">
            <i class="material-icons" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons" v-else="isDarkMode">
                brightness_7
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://gsemir0418.github.io/">
        <div class="single-column-header-title">GSemir Blog</div>
        
        <div class="single-column-header-subtitle">个人技术博客</div>
        

    </a>
</div>

            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    可视化大屏技术
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2021-05-28 09:30
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF%E6%96%87%E6%A1%A3">技术积累文档</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/%E5%89%8D%E7%AB%AF">前端</a>
                                &nbsp;
                            
                                <a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96">可视化</a>
                                &nbsp;
                            
                                <a href="/tags/echarts">echarts</a>
                                &nbsp;
                            
                                <a href="/tags/react">React</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="1-背景和意义">1 背景和意义</h1>
<p>数据可视化即把相对复杂、抽象的数据通过可视化的方式以人们更易理解的形式展示出来的一系列手段，旨在更形象地表达数据内在的信息和规律，促进数据信息的传播和应用。在当前Web前端可视化技术的支持下，数据可视化除了“可视”，还有可交流、可互动的特点。数据可视化的本质是数据空间到图形空间的映射。是抽象数据的具象表达。</p>
<p>大屏数据可视化是以大屏为主要展示载体的数据可视化设计。基于大屏展示“大面积、炫酷动效、丰富色彩”等主要特征，通过关键信息大屏共享的方式可方便企业团队讨论与决策，因此大屏也常应用与数据分析监测领域。目前大屏数据可视化主要分为信息展示、数据分析及监控预警三大类。</p>
<p>随着大数据的发展，可视化大屏在各个行业的应用越来越广泛，尤其是在政府、商业、金融、制造等行业的业务场景中。例如，可视化大屏作为传递信息的有效手段，在城市智能运营中心、应急指挥中心、公安监控中心、电力调度中心、金融交易大厅等部门和机构中发挥着重要作用；同时它具有日常监测、分析判断、应急指挥、展示汇报等多种功能，在提高科学管理方面也发挥着重要作用。</p>
<h1 id="2-技术原理">2 技术原理</h1>
<p>数据可视化展示大屏主要基于<code>React</code>框架、<code>ECharts</code>可视化图表库、<code>CSS</code>布局与适配以及特效制作等Web前端可视化开发技术。</p>
<h2 id="21-react框架">2.1 React框架</h2>
<p><code>React</code>是一个声明式，高效且灵活的用于构建用户界面的JavaScript库。使用React可以将一些简短、独立的代码片段组合成复杂的UI界面，这些代码片段被称作“组件”。数据可视化展示大屏中的每个展示模块均可封装为独立的组件，方便复用与后期维护。</p>
<h2 id="22-大屏适配公式">2.2 大屏适配公式</h2>
<p>可视化大屏设计稿的比例通常为16:9，为了保证其在不同分辨率及屏幕比例上的展示效果，在开发时需运用大屏适配算法对大屏尺寸信息进行换算。</p>
<p><img src="./ksh1.png" alt="img"></p>
<p><code>公式1.1</code>为大屏尺寸适配公式，其中<code>Wp</code>为页面有效宽度，<code>Hp</code>为页面有效高度。</p>
<h2 id="23-元素适配公式">2.3 元素适配公式</h2>
<p>锁定好大屏尺寸后，需要利用到<code>CSS3</code>中新增的rem单位结合适配公式，对大屏内部各元素的尺寸针对不同比例的屏幕进行适配。</p>
<p><code>Rem</code>（Root em）是<code>CSS3</code>新增的一个相对单位，使用<code>rem</code>为元素设定相对尺寸时，相对的只是HTML根元素。通过它既可以做到只修改根元素就成比例地调整所有字体大小，又可以避免字体大小逐层复合的连锁反应。<code>公式1.2</code>为内部元素尺寸适配公式。</p>
<p><img src="./ksh2.png" alt="img"></p>
<h2 id="24-echarts可视化图表库">2.4 ECharts可视化图表库</h2>
<p><code>ECharts</code>是一个使用JavaScript实现的开源可视化库，涵盖各行业图表，满足各种需求。其主要特点如下：</p>
<ol>
<li>丰富的可视化类型：提供了常规的折线图、柱状图、散点图、饼图、K线图，用于统计的盒形图，用于地理数据可视化的地图、热力图、线图，用于关系数据可视化的关系图、treemap、旭日图，多维数据可视化的平行坐标，还有用于BI的漏斗图，仪表盘，并且支持图与图之间的混搭。</li>
<li>多种数据格式无需转换直接使用：内置的dataset属性（4.0+）支持直接传入包括二维表，key-value等多种格式的数据源，此外还支持输入TypedArray格式的数据。</li>
<li>千万数据的前端展现：通过增量渲染技术（4.0+），配合各种细致的优化，ECharts能够展现千万级的数据量。</li>
<li>移动端优化：针对移动端交互做了细致的优化，例如移动端小屏上适于用手指在坐标系中进行缩放、平移。PC端也可以用鼠标在图中进行缩放（用鼠标滚轮）、平移等。</li>
<li>多渲染方案，跨平台使用：支持以Canvas、SVG（4.0+）、VML的形式渲染图表。</li>
<li>深度的交互式数据探索：提供了图例、视觉映射、数据区域缩放、tooltip、数据刷选等开箱即用的交互组件，可以对数据进行多维度数据筛取、视图缩放、展示细节等交互操作。</li>
<li>多维数据的支持以及丰富的视觉编码手段：对于传统的散点图等，传入的数据也可以是多个维度的。</li>
<li>动态数据：数据的改变驱动图表展现的改变。</li>
<li>绚丽的特效：针对线数据，点数据等地理数据的可视化提供了吸引眼球的特效。</li>
<li>通过GL实现更多更强大绚丽的三维可视化：在VR，大屏场景里实现三维的可视化效果。</li>
</ol>
<h1 id="3-技术实现方案">3 技术实现方案</h1>
<h2 id="31-大屏设计流程">3.1 大屏设计流程</h2>
<ol>
<li>
<p>根据业务场景抽取关键指标</p>
<p>关键指标是一些概括性词语，是对一组或者一系列数据的统称。一般情况下，一个指标在大屏上独占一块区域。以supAPS为例，这里的关键指标有：原料库存、计划实际对比、产品库存与库存成本等。确定关键指标后，根据业务需求拟定各个指标展示的优先级（主、次、辅）。</p>
</li>
<li>
<p>选定可视化图表类型</p>
<p>同一个指标的数据，从不同维度分析就有不同结果。当确定好各项指标的分析维度后，事实上图表类型也就基本确定了。如库存成本选用柱状图的形式，装置加工选用表格的形式，计划实际对比选择折线图的形式等。</p>
</li>
<li>
<p>页面布局</p>
<p>图表类型和屏幕尺寸确立后，接下来要对设计稿进行页面布局的划分。核心业务指标安排在中间位置、占较大面积；其余的指标按优先级依次在核心指标周围展开。一般把有关联的指标让其相邻或靠近，把图表类型相近的指标放一起，这样能减少观者认知上的负担并提高信息传递的效率。</p>
</li>
<li>
<p>页面开发</p>
<p>在定义好分析指标、确定页面布局后，进行前端样式的开发工作，将数据接入到前端并呈现出来。</p>
</li>
<li>
<p>整体细节调优与测试</p>
</li>
<li>
<p>页面开发完成后，将真实页面投放到大屏进行的测试与优化。主要分为两部分：</p>
<p>1）视觉方面的测试：关键视觉元素、字体字号、页面动效、图形图表等是否按预期显示、有无变形、错位等情况。</p>
<p>2）性能与数据方面的测试：图形图表动画是否流畅、数据加载、刷新有无异常；页面长时间展示是否存在奔溃、卡死等情况；后台控制系统能否正常切换前端页面显示。</p>
</li>
</ol>
<h2 id="32-大屏适配">3.2 大屏适配</h2>
<p>基于大屏适配公式，计算页面尺寸。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8b008b;font-weight:bold">const</span> clientWidth = <span style="color:#658b00">document</span>.documentElement.clientWidth
<span style="color:#8b008b;font-weight:bold">const</span> clientHeight = <span style="color:#658b00">document</span>.documentElement.clientHeight
	<span style="color:#658b00">window</span>.pageWidth =
		clientWidth / clientHeight &gt; <span style="color:#b452cd">16</span> / <span style="color:#b452cd">9</span>
		 ? clientHeight * (<span style="color:#b452cd">16</span> / <span style="color:#b452cd">9</span>)
 : clientWidth
<span style="color:#8b008b;font-weight:bold">const</span> pageHeight = pageWidth / (<span style="color:#b452cd">16</span> / <span style="color:#b452cd">9</span>)
<span style="color:#658b00">document</span>.write(<span style="color:#cd5555">`&lt;style&gt;html{font-size:</span><span style="color:#cd5555">${</span>pageWidth / <span style="color:#b452cd">100</span><span style="color:#cd5555">}</span><span style="color:#cd5555">px&lt;/style&gt;`</span>)
</code></pre></div><p>在通用<code>SCSS</code>文件中定义实际尺寸<code>rem</code>与设计稿<code>px</code>单位之间的换算关系函数，默认选用分辨率为1920*1080。</p>
<pre><code class="language-less" data-lang="less">@function px($n) {@return $n / 1920 * 100rem;}
</code></pre><h2 id="33-css布局">3.3 CSS布局</h2>
<p>对于内部展示区块，采用<code>CSS3</code>的<code>Grid</code>布局方式。<code>Grid</code> 布局是将容器划分成&quot;行&quot;和&quot;列&quot;，产生单元格，然后指定&quot;项目所在&quot;的单元格，可以看作是二维布局。利用<code>grid-template-areas</code>属性定义区域，通过<code>fr</code>关键字确定区块间的比例关系。</p>
<p><img src="./ksh3.jpg" alt="img"></p>
<h2 id="34-特效制作">3.4 特效制作</h2>
<h3 id="1-边框制作">1 边框制作</h3>
<p>利用css中<code>box-shadow</code>可以无限叠加的机制，在原来边框的基础上，四角分别叠加两层不同颜色的边框阴影，实现边框效果的制作。</p>
<p><img src="./ksh4.jpg" alt="img"></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#8b008b;font-weight:bold">box-shadow</span>: 
<span style="color:#8b008b;font-weight:bold">20px</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">-18px</span> #<span style="color:#008b45;text-decoration:underline">133661</span>, <span style="color:#8b008b;font-weight:bold">-20px</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">-18px</span> #<span style="color:#008b45;text-decoration:underline">0e325f</span>,
<span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">20px</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">-18px</span> #<span style="color:#008b45;text-decoration:underline">0e325f</span>, <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">-20px</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">-18px</span> #<span style="color:#008b45;text-decoration:underline">0e325f</span>, 
<span style="color:#8b008b;font-weight:bold">10px</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">-8px</span> #<span style="color:#008b45;text-decoration:underline">164b88</span>,<span style="color:#8b008b;font-weight:bold">-10px</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">-8px</span> #<span style="color:#008b45;text-decoration:underline">0d4483</span>,
 <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">10px</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">-8px</span> #<span style="color:#008b45;text-decoration:underline">0d4483</span>, <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">-10px</span> <span style="color:#8b008b;font-weight:bold">0</span> <span style="color:#8b008b;font-weight:bold">-8px</span> #<span style="color:#008b45;text-decoration:underline">0d4483</span>;
</code></pre></div><h3 id="2-霓虹字体">2 霓虹字体</h3>
<p>通过<code>@keyframes</code>编写文本阴影动画，实现标题文本的霓虹闪烁的特效。</p>
<p><img src="./ksh5.jpg" alt="img"></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">@<span style="color:#8b008b;font-weight:bold">keyframes</span> <span style="color:#8b008b;font-weight:bold">shining</span> {
	<span style="color:#8b008b;font-weight:bold">from</span> {
        <span style="color:#8b008b;font-weight:bold">text-shadow</span>: <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">6</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">182</span>, <span style="color:#b452cd">211</span>, <span style="color:#b452cd">207</span>, <span style="color:#b452cd">0.9</span>),
        <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">30</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">182</span>, <span style="color:#b452cd">211</span>, <span style="color:#b452cd">207</span>, <span style="color:#b452cd">0.3</span>), <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">12</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">15</span>, <span style="color:#b452cd">115</span>, <span style="color:#b452cd">223</span>, <span style="color:#b452cd">0.5</span>),
        <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">21</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">15</span>, <span style="color:#b452cd">115</span>, <span style="color:#b452cd">223</span>, <span style="color:#b452cd">0.9</span>), <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">34</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">15</span>, <span style="color:#b452cd">115</span>, <span style="color:#b452cd">223</span>, <span style="color:#b452cd">0.8</span>),
        <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">54</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">15</span>, <span style="color:#b452cd">115</span>, <span style="color:#b452cd">223</span>, <span style="color:#b452cd">0.9</span>);
 	 }
 	 <span style="color:#8b008b;font-weight:bold">to</span> {
         <span style="color:#8b008b;font-weight:bold">text-shadow</span>: <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">16</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">182</span>, <span style="color:#b452cd">211</span>, <span style="color:#b452cd">207</span>, <span style="color:#b452cd">1</span>),
         <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">30</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">182</span>, <span style="color:#b452cd">211</span>, <span style="color:#b452cd">207</span>, <span style="color:#b452cd">0.4</span>), <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">22</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">15</span>, <span style="color:#b452cd">115</span>, <span style="color:#b452cd">223</span>, <span style="color:#b452cd">0.6</span>),
         <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">32</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">15</span>, <span style="color:#b452cd">115</span>, <span style="color:#b452cd">223</span>, <span style="color:#b452cd">0.8</span>), <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">48</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">15</span>, <span style="color:#b452cd">115</span>, <span style="color:#b452cd">223</span>, <span style="color:#b452cd">0.9</span>),
         <span style="color:#b452cd">0</span> <span style="color:#b452cd">0</span> <span style="color:#b452cd">70</span><span style="color:#00688b;font-weight:bold">px</span> <span style="color:#658b00">rgba</span>(<span style="color:#b452cd">15</span>, <span style="color:#b452cd">115</span>, <span style="color:#b452cd">223</span>, <span style="color:#b452cd">1</span>);
 	 }
}
</code></pre></div><h3 id="3-表格滚动特效">3 表格滚动特效</h3>
<p>大屏展示中的表格数据显示范围有限，因此需要使表格自动滚动来动态展示表格数据。根据表格滚动条与顶端距离，即判断<code>scrollHeight</code>与<code>scrollTop</code>的大小关系，通过设置定时器的方式不断增加<code>scrollTop</code>的值，从而实现表格数据自动滚动的效果。</p>
<h2 id="35-echarts图表的制作">3.5 ECharts图表的制作</h2>
<p>引入<code>ECharts</code>库后，通过<code>echarts.init</code>方法初始化<code>ECharts实例</code>并通过<code>setOption</code>方法生成图表。参考官网的option示例配置，根据需求调整坐标轴与系列图形样式的属性参数即可。</p>
<p>将图表本身与其所处区块元素视为一个整体的组件进行开发，提高复用性，方便后期维护。组件采用React函数组件形式，结合<code>useRef</code>、<code>useEffect</code>等<code>hooks</code>函数，实现图表的初始化与参数配置。</p>
<p><img src="./khs6.jpg" alt="img"></p>
<h2 id="36-实时更新数据">3.6 实时更新数据</h2>
<p>实时更新数据由于没有实际后端数据，因此使用定时器与随机数的方式模拟实时数据的更新。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">setInterval(() =&gt; {
	<span style="color:#8b008b;font-weight:bold">const</span> newData = [
		{ name: <span style="color:#cd5555">&#39;甲&#39;</span>, value: <span style="color:#658b00">Math</span>.random() * <span style="color:#b452cd">10</span> },
		{ name: <span style="color:#cd5555">&#39;乙&#39;</span>, value: <span style="color:#658b00">Math</span>.random() * <span style="color:#b452cd">10</span> },
		{ name: <span style="color:#cd5555">&#39;丙&#39;</span>, value: <span style="color:#658b00">Math</span>.random() * <span style="color:#b452cd">10</span> },
   	]
    renderMyChart(newData)
}, <span style="color:#b452cd">1000</span>)
</code></pre></div><p><!-- raw HTML omitted --></p>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">最后修改于 2021-05-28</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://gsemir0418.github.io/posts/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/">
			下回<br>React组件生命周期
                </a>
                
                
                
                <a class="older-posts" href="https://gsemir0418.github.io/posts/react%E5%9F%BA%E7%A1%80/">
			上回<br>React基础
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                


<div id="gitalk-container"></div>






            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	2021 GSemir Blog
	
</div>
            </div>
    <script>
let app;

app = new Vue({
    el: '#app',
    data: {
        scrollY: 0,
        navOpacity: 0,
        isDrawerOpen: false,
        mounted: false,
        isDarkMode: false
    },
    methods: {
            sgn(t, x) {
                let k = 1. / (1. - 2 * t);
                if (x <= t) return 0;
                else if (x >= 1 - t) return 1;
                else {
                    return k * (x - t);
                }
            },
            handleScroll() {
                this.scrollY = window.scrollY;
                this.navOpacity = this.sgn(.0, Math.min(1, Math.max(0, window.scrollY / (this.pageHeadHeight() - this.navBarHeight() * 0.8))));
                const {navBar, navBackground, navTitle, extraContainer, streamContainer} = this.$refs;

                if (this.navOpacity >= 1) {
                    navBackground.style.opacity = 1;
                    navTitle.style.opacity = 1;
                } else {
                    navBackground.style.opacity = 0;
                    navTitle.style.opacity = 0;
                }
            },
            handleResize() {
                const {navBar, navBackground, navTitle, extraContainer, streamContainer} = this.$refs;
                extraContainer.style.left = (streamContainer.offsetWidth - extraContainer.offsetWidth) + 'px';
            },
            navBarHeight() {
                return this.$refs.navBar.offsetHeight;
            },
            pageHeadHeight() {
                return this.$refs.pageHead.offsetHeight;
            },
            toggleDrawer() {
                this.isDrawerOpen = !this.isDrawerOpen;
                document.getElementsByTagName('html')[0].style.overflow = this.isDrawerOpen ? 'hidden' : 'unset';
            },
            closeDrawer() {
                this.isDrawerOpen = false;
                document.getElementsByTagName('html')[0].style.overflow = this.isDrawerOpen ? 'hidden' : 'unset';
            },
            toggleDarkMode() {
                this.isDarkMode = !this.isDarkMode;
                if (this.isDarkMode==true){
                    document.cookie = "night=1;path=/";
                    document.body.classList.add("night");
                } else {
                    document.cookie = "night=0;path=/";
                    document.body.classList.remove("night");
                }
            }
    },
    created() {
        window.addEventListener('scroll', this.handleScroll);
        window.addEventListener('resize', this.handleResize);
        window._nonDesktop = function () {
            let check = false;
            (function (a) {
                if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) check = true;
            })(navigator.userAgent || navigator.vendor || window.opera);
            return check;
        };
        
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1");
        if (night==""){
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                
            }
        }else{
            
            if (night=="1") {
                this.toggleDarkMode();
            }
        }
    },
    mounted() {
        this.handleScroll();
        this.handleResize();
        this.mounted = true;

        
    },
    destroyed() {
        window.removeEventListener('scroll', this.handleScroll);
        window.removeEventListener('resize', this.handleResize);
    }
});
</script>

<script src="https://gsemir0418.github.io//js/journal.js"></script>
    </body>
</html>
