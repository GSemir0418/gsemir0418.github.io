<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Git相关 - Even - A super concise theme for Hugo</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="gsemir" /><meta name="description" content="0 初始化配置 0.1 全局配置 安装完 Git 之后，要做的第一件事就是设置你的用户名和邮件地址 1 2 3 4 git config --global user.name &amp;#34;gsemir0418&amp;#34; git config --global user.email &amp;#34;845217811@qq.com&amp;#34; // 查看全局配置 git config --list 0.2 配置SSH公" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.89.2 with theme even" />


<link rel="canonical" href="https://gsemir0418.github.io/post/git/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Git相关" />
<meta property="og:description" content="0 初始化配置 0.1 全局配置 安装完 Git 之后，要做的第一件事就是设置你的用户名和邮件地址 1 2 3 4 git config --global user.name &#34;gsemir0418&#34; git config --global user.email &#34;845217811@qq.com&#34; // 查看全局配置 git config --list 0.2 配置SSH公" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gsemir0418.github.io/post/git/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-08-15T22:02:28+08:00" />
<meta property="article:modified_time" content="2022-07-15T15:45:00+08:00" />

<meta itemprop="name" content="Git相关">
<meta itemprop="description" content="0 初始化配置 0.1 全局配置 安装完 Git 之后，要做的第一件事就是设置你的用户名和邮件地址 1 2 3 4 git config --global user.name &#34;gsemir0418&#34; git config --global user.email &#34;845217811@qq.com&#34; // 查看全局配置 git config --list 0.2 配置SSH公"><meta itemprop="datePublished" content="2021-08-15T22:02:28+08:00" />
<meta itemprop="dateModified" content="2022-07-15T15:45:00+08:00" />
<meta itemprop="wordCount" content="3918">
<meta itemprop="keywords" content="GitHub," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git相关"/>
<meta name="twitter:description" content="0 初始化配置 0.1 全局配置 安装完 Git 之后，要做的第一件事就是设置你的用户名和邮件地址 1 2 3 4 git config --global user.name &#34;gsemir0418&#34; git config --global user.email &#34;845217811@qq.com&#34; // 查看全局配置 git config --list 0.2 配置SSH公"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">GSemir</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">GSemir</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Git相关</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-08-15 </span>
        <div class="post-category">
            <a href="/categories/github/"> GitHub </a>
            </div>
          <span class="more-meta"> 3918 words </span>
          <span class="more-meta"> 8 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#0-初始化配置">0 初始化配置</a>
      <ul>
        <li><a href="#01-全局配置">0.1 全局配置</a></li>
        <li><a href="#02-配置ssh公匙">0.2 配置SSH公匙</a>
          <ul>
            <li><a href="#021-本地创建ssh-key">0.2.1 本地创建ssh key</a></li>
            <li><a href="#022-git账户设置ssh">0.2.2 git账户设置ssh</a></li>
            <li><a href="#023-验证">0.2.3 验证</a></li>
          </ul>
        </li>
        <li><a href="#03-修改之前的http仓库为ssh">0.3 修改之前的http仓库为ssh</a></li>
        <li><a href="#04-创建多个ssh-key">0.4 创建多个ssh key</a></li>
      </ul>
    </li>
    <li><a href="#1-简单的代码提交流程">1 简单的代码提交流程</a>
      <ul>
        <li><a href="#11-基本流程">1.1 基本流程</a></li>
        <li><a href="#12-存在分支的情况">1.2 存在分支的情况</a></li>
      </ul>
    </li>
    <li><a href="#2-git-flow协同工作流">2 git flow协同工作流</a>
      <ul>
        <li><a href="#21-单人管理模式">2.1 单人管理模式</a>
          <ul>
            <li><a href="#211-fork">2.1.1 fork</a></li>
            <li><a href="#212-建立分支">2.1.2 建立分支</a></li>
            <li><a href="#213-stash--同步分支代码">2.1.3 stash &amp; 同步分支代码</a></li>
            <li><a href="#214-正常提交代码">2.1.4 正常提交代码</a></li>
            <li><a href="#215-pull-request">2.1.5 Pull Request</a></li>
            <li><a href="#216-code-review">2.1.6 Code Review</a></li>
            <li><a href="#217-同步本地与主仓库代码">2.1.7 同步本地与主仓库代码</a></li>
          </ul>
        </li>
        <li><a href="#22-多人协同模式">2.2 多人协同模式</a></li>
      </ul>
    </li>
    <li><a href="#3-git-add">3 git add</a></li>
    <li><a href="#4-git-commit">4 git commit</a></li>
    <li><a href="#5-git-fetch">5 git fetch</a></li>
    <li><a href="#6-git-merge">6 git merge</a></li>
    <li><a href="#7-git-pull">7 git pull</a></li>
    <li><a href="#8-git-push">8 git push</a></li>
    <li><a href="#9-git-remote">9 git remote</a></li>
    <li><a href="#10-git-checkoutbranch">10 git checkout/branch</a>
      <ul>
        <li><a href="#101-基本操作">10.1 基本操作</a></li>
        <li><a href="#102-业务场景">10.2 业务场景</a></li>
      </ul>
    </li>
    <li><a href="#11-git-reset">11 git reset</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="0-初始化配置">0 初始化配置</h1>
<h2 id="01-全局配置">0.1 全局配置</h2>
<p>安装完 Git 之后，要做的第一件事就是设置你的用户名和邮件地址</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">git config --global user.name &#34;gsemir0418&#34;
git config --global user.email &#34;845217811@qq.com&#34;
// 查看全局配置
git config --list
</code></pre></td></tr></table>
</div>
</div><h2 id="02-配置ssh公匙">0.2 配置SSH公匙</h2>
<h3 id="021-本地创建ssh-key">0.2.1 本地创建ssh key</h3>
<p>打开终端，输入如下指令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">ssh-keygen -t rsa -C &#34;845217811@qq.com&#34;
</code></pre></td></tr></table>
</div>
</div><p>直接点回车，说明会在默认文件id_rsa上生成ssh key</p>
<p>然后系统要求输入密码，直接回车表示不设密码；重复密码是也可以直接回车，表示不设密码。</p>
<p>创建成功后，在终端输入如下指令，便可看到几个文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">ls ~/.ssh
id_rsa  id_rsa.pub  known_hosts
</code></pre></td></tr></table>
</div>
</div><p>如没有known_hosts，可以后续尝试clone项目，git会为我们自动添加known_hosts文件</p>
<p>vscode或vim打开<code>id_rsa.pub</code>，复制全部内容备用。</p>
<h3 id="022-git账户设置ssh">0.2.2 git账户设置ssh</h3>
<p>进入github主页，进入Account Settings，左边选择SSH Keys，Add SSH Key,</p>
<p>title建议填写计算机名称，粘贴刚刚复制的key。确定后配置完成了</p>
<h3 id="023-验证">0.2.3 验证</h3>
<p>输入以下指令验证配置是否成功：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">ssh -T git@github.com
</code></pre></td></tr></table>
</div>
</div><p>如果配置过密码，输入密码后，看到如下指令，则表示配置成功</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">You’ve successfully authenticated, but GitHub does not provide shell access
</code></pre></td></tr></table>
</div>
</div><h2 id="03-修改之前的http仓库为ssh">0.3 修改之前的http仓库为ssh</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">// 查看当前远程仓库路径
git remote -v
// 修改为ssh路径
git remote set-url origin [新路径]
</code></pre></td></tr></table>
</div>
</div><h2 id="04-创建多个ssh-key">0.4 创建多个ssh key</h2>
<p>在使用git的时候，遇到需要创建多个ssh key的需求，一个用来github项目，一个用来gitlab项目；</p>
<p>之前如果已将创建过一个ssh key，那么在创建第二个的时候，要修改默认名称，然后增加配置文件；</p>
<p>之前创建ssh key生成了如下两个文件，一个私钥，一个公钥</p>
<blockquote>
<p>id_rsa
id_rsa.pub</p>
</blockquote>
<p>我们要生成新的一个ssh key，由于路径跟之前的一直，所以要改个名字</p>
<blockquote>
<p>id_rsa_gitlab
id_rsa_gitlab.pub</p>
</blockquote>
<p>具体如下，<code>-f</code>指定路径及文件名：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ssh-keygen -t rsa -f ~/.ssh/id_rsa_gitlab -C <span class="s2">&#34;845217811@qq.com&#34;</span> 
</code></pre></td></tr></table>
</div>
</div><p>注意：因为SSH默认只读取id_rsa,为了让SSH识别新的私钥,需要使用命令将其添加到SSH agent,命令如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ssh-add ~/.ssh/id_rsa
ssh-add ~/.ssh/id_rsa_gitlab
</code></pre></td></tr></table>
</div>
</div><p>若执行ssh-add时提示“Could not open a connection to your authentication agent”,则执行下面的命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">ssh-agent bash
</code></pre></td></tr></table>
</div>
</div><p>然后再运行ssh-add命令(可以通过ssh-add -l查看私钥列表)</p>
<p>接着修改配置文件：</p>
<p>在~./ssh目录下新建一个config文件,命令如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">touch config
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>配置文件如下：
#github
Host github.com
IdentityFile ~/.ssh/id_rsa
User <a href="mailto:a@b.com">a@b.com</a></p>
<p>#gitlab
Host gitlab.com
IdentityFile ~/.ssh/id_rsa_gitlab
User <a href="mailto:a@b.com">a@b.com</a></p>
</blockquote>
<h1 id="1-简单的代码提交流程">1 简单的代码提交流程</h1>
<h2 id="11-基本流程">1.1 基本流程</h2>
<ol>
<li><code>git status</code> 查看工作区代码相对于暂存区的差别，可简写为<code>gst</code></li>
<li><code>git add .</code> 将当前目录下修改的所有代码从工作区添加到暂存区 . 代表当前目录，可简写为<code>ga .</code></li>
<li><code>git commit -m &quot;注释&quot;</code> 将缓存区内容添加到本地仓库，尽量使用双引号</li>
<li><code>git pull origin master</code>先将远程仓库master中的信息同步到本地仓库master中</li>
<li><code>git push origin master</code> 将本地版本库推送到远程服务器，origin是远程主机，master表示是远程服务器上的master分支和本地分支重名的简写，分支名是可以修改的</li>
</ol>
<h2 id="12-存在分支的情况">1.2 存在分支的情况</h2>
<ol>
<li><code>git branch</code> 查看当前所在分支</li>
<li><code>git checkout 分支名</code> 切换到工作分支</li>
<li><code>git status </code>查看有没有需要提交的改动</li>
<li><code>git pull</code> 与远端代码保持同步</li>
<li><code>coding...</code></li>
<li><code>git add . &amp;&amp; git commit -m &quot;注释&quot;</code> 将改动提交</li>
<li><code>git push origin 分支名 </code>推送到远程</li>
</ol>
<h1 id="2-git-flow协同工作流">2 git flow协同工作流</h1>
<h2 id="21-单人管理模式">2.1 单人管理模式</h2>
<ul>
<li>
<p>单人管理模式即组长建立与管理主仓库，组员不在主仓库的分支上开发，而是 <strong>fork</strong> 到自己 workspace 下。每次开发，需要先<strong>checkout</strong> 一个新的分支，<strong>commit</strong> 之后推送到自己的仓库，再向主仓库提<strong>Merge Request</strong>。所以开发过程中对于大多数项目来说，都会经过如下步骤：</p>
<ul>
<li>
<p>Fork(Once)</p>
</li>
<li>
<p>Create a branch</p>
</li>
<li>
<p>Add commits</p>
</li>
<li>
<p>Open a Merge Request</p>
</li>
<li>
<p>Code review</p>
</li>
<li>
<p>Merge</p>
</li>
<li>
<p>Deploy</p>
</li>
</ul>
</li>
<li>
<p>流程详解如下</p>
</li>
</ul>
<h3 id="211-fork">2.1.1 fork</h3>
<ul>
<li>
<p>主仓库一般有两个分支，master和dev，日常开发工作在dev分支（<strong>设置为default</strong>）</p>
</li>
<li>
<p>协同办公的组员，将主仓库<strong>fork</strong>到自己的github，将dev分支clone到本地</p>
</li>
<li>
<p>将主仓库的远程地址添加进来</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ git remote add upstream 主仓库url
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>push和pull时，分别使用自己的仓库和主仓库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ git push origin HEAD:分支
$ git pull upstream dev
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="212-建立分支">2.1.2 建立分支</h3>
<ul>
<li>
<p>(<strong>此步骤之后的所有操作，就是日常工作的操作流程了</strong>)查看当前分支</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 查看所在分支</span>
$ git branch
* dev
<span class="c1"># 查看本地和远程的全部分支</span>
$ git branch -a 
* dev
	remotes/origin/HEAD -&gt; origin/dev
	remotes/origin/dev
	remotes/origin/master
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>新建分支</p>
<ul>
<li>当正式开始coding前，先不要在dev分支上直接开始，<strong>先pull</strong>一下主仓库保证代码为最新，之后新建一个当天开发用的分支（from dev）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ git pull upstream dev

$ git checkout -b todaywork
Swiched to a new branch <span class="s1">&#39;check&#39;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>Coding&hellip;</li>
</ul>
</li>
</ul>
<h3 id="213-stash--同步分支代码">2.1.3 stash &amp; 同步分支代码</h3>
<ul>
<li>
<p>stash</p>
<ul>
<li>当开发完成一个功能，或者这一天结束了，想要提交代码前，要先pull主仓库的代码</li>
<li>但直接pull代码会带来冲突，此时可以使用stash命令，将提交或者代码放入暂存区</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ git stash save <span class="s2">&#34;202207251044&#34;</span>
$ git pull upstream dev
</code></pre></td></tr></table>
</div>
</div><ul>
<li>主仓库最新代码拉取下来后，将暂存区内容拿出来</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># stash命令</span>
$ git stash list <span class="c1"># 查看stash了哪些存储</span>
$ git stash show <span class="c1"># 显示做了哪些改动</span>
$ git stash apply stash@<span class="o">{</span><span class="nv">$num</span><span class="o">}</span> <span class="c1"># 将某个暂存取出</span>
$ git stash drop stash@<span class="o">{</span><span class="nv">$num</span><span class="o">}</span> <span class="c1"># 丢弃stash@{$num}存储，从列表中删除这个存储</span>
$ git stash clear <span class="c1"># 删除所有缓存的stash</span>
<span class="c1"># 一般使用pop，相当于apply(0) + drop(0)</span>
$ git stash pop
</code></pre></td></tr></table>
</div>
</div><ul>
<li>解决本地冲突即可，stash会智能显示代码中的冲突</li>
</ul>
</li>
</ul>
<h3 id="214-正常提交代码">2.1.4 正常提交代码</h3>
<ul>
<li>
<p>add&amp;commit&amp;push</p>
<ul>
<li>接下来要将代码提交至本地仓库，首先要查看代码状态</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ git status / git diff
</code></pre></td></tr></table>
</div>
</div><ul>
<li>提交代码</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ git add . <span class="o">&amp;&amp;</span> git commit -m <span class="s2">&#34;feat: xxx&#34;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>push到自己的远程仓库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ git push origin todaywork
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="215-pull-request">2.1.5 Pull Request</h3>
<ul>
<li>提PR
<ul>
<li>我们到自己的远程仓库里，向主仓库提交分支合并请求，<strong>一般是自己这次工作创建的分支（todaywork）合并到主仓库的dev分支。</strong></li>
<li>选择好分支后，可以描述这次的合并请求，加title和description，在合并选项里<strong>可以选择在合并请求同意后删除这个分支</strong>，这个看个人情况，选或是不选，一般自己新建的工作分支可以选择勾上。之后就可以submit提交了，等待项目负责人的回应。这里也可以选择右上角的Assign——&gt;Edit，来选择管理人员，效果相当于“@提醒一下”。</li>
</ul>
</li>
</ul>
<h3 id="216-code-review">2.1.6 Code Review</h3>
<ul>
<li>之后就是在项目负责人那边查看这个合并请求，进行Code Review，主要是：
<ul>
<li>发现错误：人都会不可避免的出现一些纰漏，而这些纰漏在另一个人眼中也许显而易见。</li>
<li>健壮性检查：代码是否健壮，是否有潜在安全、性能风险。代码是否可以回滚。</li>
<li>质量保证：在一般情况下，新提交的代码一定需要写测试，测试不只可以保证你的提交符合预期，还可以在后人改你的代码时多一层保障。</li>
<li>统一风格：对于整个团队来说，代码风格的统一很重要。</li>
<li>完善注释：包括 commit message、代码中复杂实现是否有解释性的注释、紧急 hack 是否明确标注等。</li>
<li>互相学习</li>
</ul>
</li>
<li>哪些人需要参与 Review
<ol>
<li>项目的维护者</li>
<li>上下游影响的相关人员</li>
</ol>
</li>
<li>Reviewer人员还可以对相关的代码做评论，点赞等等，再所有人觉得代码没有问题之后，便可以接收这次合并请求，你的分支就合并到了主仓库的主分支上，你的代码就算是加上去了。</li>
<li>当然，主仓库管理人也可以对你的合并请求提出问题，做出相关评论，暂时不合并你的分支，甚至取消这个请求，这时你就需要查看评论和问题，修改代码，再次push你自己的这个分支（提交请求合并的分支），另一边也能及时看到变化（显示两次commit）。如果你的合并请求被取消了，只能重新再提交请求。</li>
</ul>
<h3 id="217-同步本地与主仓库代码">2.1.7 同步本地与主仓库代码</h3>
<ul>
<li>
<p>最后，在自己的workspace下，既可以将工作分支合并到自己的dev分支中，也可以直接删除工作分支，pull主仓库来同步最新代码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 方案一</span>
$ git checkout dev
$ git merge todaywork
$ git branch -d todaywork
<span class="c1"># 方案二</span>
$ git branch -d todaywork
$ git pull upstream dev
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="22-多人协同模式">2.2 多人协同模式</h2>
<p>// TODO</p>
<h1 id="3-git-add">3 git add</h1>
<ul>
<li>提交所有变化</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git add -A
</code></pre></td></tr></table>
</div>
</div><ul>
<li>提交被修改和被删除的文件，不包括新文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git add -u
</code></pre></td></tr></table>
</div>
</div><ul>
<li>提交新文件和被修改的文件，不包括被删除的文件</li>
<li>2.x版本的<code>git add .</code>相当于<code>-A</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git add .
</code></pre></td></tr></table>
</div>
</div><h1 id="4-git-commit">4 git commit</h1>
<ul>
<li>取消上次commit
<ul>
<li><code>git reset --soft HEAD^</code> ——仅撤回commit操作，不改变代码</li>
<li>HEAD表示回退版本，如果你进行了2次commit，都想撤回，可以使用HEAD^2</li>
<li><code>--mixed</code>——不删除工作空间改动代码，撤销commit，并且撤销git add . 操作这个为默认参数,git reset &ndash;mixed HEAD^ 和 git reset HEAD^ 效果是一样的。</li>
<li><code>--soft</code>——不删除工作空间改动代码，撤销commit，不撤销git add .</li>
<li><code>--hard</code>——删除工作空间改动代码，撤销commit，撤销git add . 注意完成这个操作后，就恢复到了上一次的commit状态。</li>
</ul>
</li>
<li>如果commit注释写错了，只是想改一下注释，只需要<code>git commit --amend</code></li>
</ul>
<h1 id="5-git-fetch">5 git fetch</h1>
<h1 id="6-git-merge">6 git merge</h1>
<ul>
<li>将所在分支与指定分支合并</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git merge &lt;分支名&gt;
</code></pre></td></tr></table>
</div>
</div><h1 id="7-git-pull">7 git pull</h1>
<h1 id="8-git-push">8 git push</h1>
<ul>
<li>提交代码到指定远程仓库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git push -u 仓库名 分支名
</code></pre></td></tr></table>
</div>
</div><p>加了参数-u后，以后可以直接用git push 代替</p>
<ul>
<li>使用本地分支强行覆盖远程分支</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">git push origin master -f
</code></pre></td></tr></table>
</div>
</div><h1 id="9-git-remote">9 git remote</h1>
<ul>
<li>添加远程仓库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git remote add 仓库名 仓库路径
</code></pre></td></tr></table>
</div>
</div><ul>
<li>删除远程仓库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git remote remove 仓库名
</code></pre></td></tr></table>
</div>
</div><ul>
<li>修改远程仓库路径</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git remote set-url 路径
</code></pre></td></tr></table>
</div>
</div><ul>
<li>查看远程仓库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git remote -v
</code></pre></td></tr></table>
</div>
</div><h1 id="10-git-checkoutbranch">10 git checkout/branch</h1>
<h2 id="101-基本操作">10.1 基本操作</h2>
<ul>
<li>查看本地有哪些分支</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git branch
</code></pre></td></tr></table>
</div>
</div><ul>
<li>新建分支</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git branch &lt;分支名&gt;
</code></pre></td></tr></table>
</div>
</div><ul>
<li>切换至分支</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git checkout &lt;分支名&gt;
</code></pre></td></tr></table>
</div>
</div><ul>
<li>新建并切换至新分支</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git checkout -b &lt;分支名&gt;
</code></pre></td></tr></table>
</div>
</div><ul>
<li>删除本地分支</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git branch -d &lt;分支名&gt;
</code></pre></td></tr></table>
</div>
</div><ul>
<li>删除远端分支</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git push origin --delete &lt;分支名&gt;
</code></pre></td></tr></table>
</div>
</div><h2 id="102-业务场景">10.2 业务场景</h2>
<ul>
<li>
<p>要将修改的业务代码<strong>同时push到其他分支</strong>：（<code>dev</code>分支的改动同步到<code>debug</code>分支）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// 在dev分支找到并复制最新的commitId
</span><span class="c1"></span><span class="nx">git</span> <span class="nx">log</span>
<span class="c1">// 切换到debug分支
</span><span class="c1"></span><span class="nx">git</span> <span class="nx">checkout</span> <span class="nx">debug</span>
<span class="c1">// 使用cherry-pick命令，此时将会将对应的commit应用到此分支
</span><span class="c1"></span><span class="nx">git</span> <span class="nx">cherry</span><span class="o">-</span><span class="nx">pick</span> <span class="nx">commitId</span>
<span class="c1">// 直接push
</span><span class="c1"></span><span class="nx">git</span> <span class="nx">push</span> <span class="nx">origin</span> <span class="nx">debug</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h1 id="11-git-reset">11 git reset</h1>
<ol>
<li>
<p><strong>git reset &ndash;soft 版本号</strong></p>
<ul>
<li><code>git reset --soft HEAD^</code> //回到上一个版本</li>
<li>不删除工作区改动的代码，撤销commit，<strong>不撤销git add .</strong></li>
</ul>
</li>
<li>
<p><strong>git reset &ndash;mixed 版本号</strong></p>
<ul>
<li>
<p><code>git reset --mixed HEAD^</code> //回到上一个版本</p>
</li>
<li>
<p>不删除工作区改动的代码，撤销commit，撤销git add .</p>
<p><strong>git reset &ndash;hard 版本号</strong></p>
<p><code>git reset --hard HEAD^</code> //回到上一个版本</p>
</li>
</ul>
</li>
<li>
<ul>
<li>
<p>不删除工作区改动的代码，撤销commit，撤销git add .</p>
<p><strong>git reset &ndash;hard 版本号</strong></p>
<p><code>git reset --hard HEAD^</code> //回到上一个版本</p>
</li>
<li>
<p><strong>删除</strong>工作区的代码，撤销commit，撤销git add . 回到上一次commit的状态</p>
</li>
</ul>
</li>
</ol>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">gsemir</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2022-07-15
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/github/">GitHub</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/express%E7%95%99%E8%A8%80%E6%9D%BF/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Express留言板</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/usestate%E5%8E%9F%E7%90%86/">
            <span class="next-text nav-default">UseState原理</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="http://localhost:1313" class="iconfont icon-github" title="github"></a>
  <a href="https://gsemir0418.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>gsq</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>








</body>
</html>
